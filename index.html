<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Radhe Finvest - Banking Kiosk</title>

    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#6366f1">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Nexus CSP Banking & Services Kiosk Application">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="icons/icon-192.png">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Outfit:wght@500;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="style.css">

    <!-- jsPDF Library for PDF Generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <!-- Register Service Worker -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed:', err));
            });
        }
    </script>
</head>

<body>

    <div class="app-container">
        <!-- Global Header (Shows Logout when auth) -->
        <header id="main-header" class="hidden">
            <div class="logo">Radhe Finvest</div>
            <button id="logout-btn" class="btn-secondary">Log Out</button>
        </header>

        <!-- ===================
             LOGIN / HOME VIEW
             =================== -->
        <section id="login-view" class="view-section fade-in">
            <div class="glass-card">
                <div style="text-align: center; margin-bottom: 2rem;">
                    <h1 class="logo" style="font-size: 2.5rem; margin-bottom: 0.5rem;">Radhe Finvest</h1>
                    <p style="color: var(--text-muted);">Digital Service Point</p>
                </div>

                <div class="role-switch-container">
                    <button class="btn-secondary role-btn active" data-role="customer">Customer Portal</button>
                    <button class="btn-secondary role-btn" data-role="staff">Staff Login</button>
                </div>

                <!-- STAFF LOGIN FORM -->
                <form id="staff-login-form" class="hidden">
                    <div class="input-group">
                        <label class="input-label">Staff Agent ID</label>
                        <input type="text" id="staff-id" class="input-field" placeholder="e.g. AGENT001"
                            autocomplete="off">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Password</label>
                        <input type="password" id="staff-pin" class="input-field" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
                    </div>
                    <button type="submit" class="btn-primary" style="width: 100%;">Access Dashboard</button>
                </form>

                <!-- CUSTOMER LOGIN / TRACKING FORM -->
                <div id="customer-login-container">
                    <button id="google-login-btn" class="btn-google">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg" alt="G"
                            width="20">
                        Continue with Google
                    </button>

                    <div
                        style="margin: 1.5rem 0; display: flex; align-items: center; gap: 0.5rem; color: var(--text-muted); font-size: 0.8rem;">
                        <hr style="flex:1; border-color: var(--glass-border);"> <span>OR TRACK REQUEST</span>
                        <hr style="flex:1; border-color: var(--glass-border);">
                    </div>

                    <form id="customer-track-form">
                        <div class="input-group">
                            <input type="text" id="track-id" class="input-field" placeholder="Enter Receipt ID / Mobile"
                                autocomplete="off" style="text-align: center;">
                        </div>
                        <button type="submit" class="btn-secondary" style="width: 100%; font-size: 0.9rem;">Quick
                            Track</button>
                    </form>
                    <div style="margin-top: 1.5rem; text-align: center;">
                        <a href="./nexus-csp.apk" class="download-app-btn"
                            style="display: inline-flex; align-items: center; gap: 0.5rem; color: var(--accent-primary); text-decoration: none; font-size: 0.9em; padding: 10px 15px; border: 1px solid var(--glass-border); border-radius: 8px; background: rgba(255, 255, 255, 0.05); transition: all 0.3s ease;">
                            <i class="fas fa-android"></i> <span>Download Android App</span>
                        </a>
                    </div>
                </div>

                <p id="login-error" style="color: #f43f5e; margin-top: 1rem; text-align: center; display: none;">Invalid
                    credentials</p>
            </div>
        </section>

        <!-- ===================
             CUSTOMER DASHBOARD VIEW
             =================== -->
        <section id="customer-dashboard-view" class="view-section wide hidden fade-in">
            <header style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <div>
                    <h2 style="font-family: var(--font-heading); margin-bottom: 0;">Welcome, <span
                            id="customer-name-display">User</span></h2>
                    <p style="color: var(--text-muted); font-size: 0.9rem;" id="customer-email-display">user@gmail.com
                    </p>
                </div>
                <button onclick="logout()" class="btn-secondary" style="font-size: 0.8rem;">Log Out</button>
            </header>

            <!-- BANK ACCOUNT OPENING ADVERTISEMENT -->
            <div class="promo-banner glass-card"
                style="margin-bottom: 1.5rem; background: linear-gradient(135deg, rgba(99, 102, 241, 0.15), rgba(16, 185, 129, 0.1)); border: 2px solid var(--accent-primary);">
                <div class="promo-content" style="display: flex; align-items: center; gap: 2rem; flex-wrap: wrap;">
                    <div class="promo-icon" style="font-size: 4rem; animation: pulse 2s infinite;">üè¶</div>
                    <div class="promo-text" style="flex: 1; min-width: 250px;">
                        <h2
                            style="font-family: var(--font-heading); color: var(--accent-primary); margin-bottom: 0.5rem; font-size: 1.5rem;">
                            ‚ú® Open a New Bank Account Today!</h2>
                        <p style="color: var(--text-muted); margin-bottom: 1rem;">Join thousands of satisfied customers
                            with our hassle-free account opening facility</p>
                        <div class="promo-features"
                            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 0.75rem; margin-bottom: 1rem;">
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Zero Balance Account
                            </div>
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Free Debit Card
                            </div>
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Free Passbook
                            </div>
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Instant Account Activation
                            </div>
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Free UPI Services
                            </div>
                            <div class="feature-item"
                                style="display: flex; align-items: center; gap: 0.5rem; color: var(--text-main);">
                                <span style="color: var(--accent-secondary);">‚úì</span> Free NetBanking
                            </div>
                        </div>
                    </div>
                    <div class="promo-cta">
                        <button id="apply-account-btn" class="btn-primary"
                            style="font-size: 1.1rem; padding: 1rem 2rem; background: linear-gradient(135deg, var(--accent-primary), #818cf8); box-shadow: 0 8px 30px var(--accent-glow); animation: glow 2s infinite alternate;">
                            üöÄ Apply Now
                        </button>
                        <p
                            style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem; text-align: center;">
                            Quick & Easy Process</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <!-- SERVICE CATALOG (For Customers) -->
                <div class="glass-card">
                    <h3 style="margin-bottom: 1rem; color: var(--accent-primary);">Apply for Service</h3>
                    <div id="customer-service-grid" class="service-grid">
                        <!-- JS Injected Services -->
                    </div>
                </div>

                <!-- MY APPLICATIONS -->
                <div class="glass-card">
                    <h3 style="margin-bottom: 1rem;">My Applications</h3>
                    <div id="customer-history-list" class="transaction-list">
                        <!-- JS Injected History -->
                        <p style="text-align: center; color: var(--text-muted); font-style: italic; padding: 1rem;">No
                            active applications.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- ===================
             CUSTOMER RECEIPT / STATUS VIEW
             =================== -->
        <section id="customer-view" class="view-section wide hidden fade-in">
            <div style="margin-bottom: 2rem; display: flex; align-items: center; gap: 1rem;">
                <button onclick="switchView('login')" class="btn-secondary">‚Üê Back</button>
                <h2 style="font-family: var(--font-heading);">Service Status</h2>
            </div>

            <div id="receipt-display-area">
                <!-- Receipt Card will be injected here -->
            </div>
        </section>

        <!-- ===================
             STAFF SERVICE DASHBOARD
             =================== -->
        <section id="staff-view" class="view-section wide hidden fade-in">
            <h2 style="font-family: var(--font-heading); margin-bottom: 1.5rem;">Agent Portal <span
                    style="font-size: 1rem; color: var(--text-muted); font-weight: 400;">(Logged in as <span
                        id="staff-name">Staff</span>)</span></h2>

            <div class="dashboard-grid" style="grid-template-columns: 2fr 1fr;">

                <!-- SERVICE CATALOG -->
                <div class="glass-card">
                    <h3 style="margin-bottom: 1rem; color: var(--accent-primary);">Select Service</h3>
                    <div id="service-grid" class="service-grid">
                        <!-- JS Injected Services -->
                    </div>
                </div>

                <!-- DAILY STATS -->
                <div class="glass-card">
                    <h3 style="margin-bottom: 1rem;">Daily Overview</h3>
                    <div style="margin-bottom: 1.5rem;">
                        <span class="stat-label">Today's Collection</span>
                        <span class="stat-value" id="daily-collection">$0.00</span>
                    </div>
                    <button id="btn-view-history" class="btn-secondary" style="width: 100%;">View Daily History</button>
                </div>
            </div>

            <!-- CUSTOMER APPLICATIONS SECTION -->
            <div id="applications-section" class="glass-card" style="margin-top: 2rem;">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h3 style="color: var(--accent-primary);">üìã Customer Applications</h3>
                    <div style="display: flex; gap: 0.5rem;">
                        <button id="filter-all" class="btn-filter active"
                            onclick="filterApplications('all')">All</button>
                        <button id="filter-pending" class="btn-filter"
                            onclick="filterApplications('Pending')">Pending</button>
                        <button id="filter-verified" class="btn-filter"
                            onclick="filterApplications('Documents Verified')">Verified</button>
                        <button id="filter-done" class="btn-filter" onclick="filterApplications('Done')">Done</button>
                    </div>
                </div>
                <div id="applications-list" class="applications-list">
                    <!-- JS Injected Applications -->
                </div>
            </div>

            <!-- RECENT HISTORY (Hidden by default or shown below) -->
            <div id="staff-history-section" class="glass-card" style="margin-top: 2rem;">
                <h3 style="margin-bottom: 1rem;">Recent Transactions</h3>
                <div id="transaction-list" class="transaction-list">
                    <!-- JS Injected History -->
                </div>
            </div>
        </section>

        <!-- ===================
         MODAL OVERLAY
         =================== -->
        <div id="modal-overlay" class="modal-overlay hidden">
            <div class="glass-card modal-content fade-in">
                <h3 id="modal-title" style="margin-bottom: 1rem;">Title</h3>
                <p id="modal-message" style="margin-bottom: 1.5rem; color: var(--text-muted);">Message goes here...</p>

                <!-- Dynamic Content Area (Inputs) -->
                <div id="modal-body"></div>

                <button type="submit" id="loginRequestButton" class="login-btn">
                    <span class="btn-text">Login Securely</span>
                    <div class="loading-spinner"></div>
                </button>


                <div class="modal-actions">
                    <button id="modal-btn-cancel" class="btn-secondary">Cancel</button>
                    <button id="modal-btn-confirm" class="btn-primary">Confirm</button>
                </div>
            </div>
        </div>

    </div>

    <script src="app.js"></script>
</body>

</html>